# Федерация спортивного туризма России

------
пополнение базы данных горных перевалов России с привлечением краудфандинга </br>
основная таблица - это `PerevalAdded`,</br>
связанная с тремя таблицами `Coords` `Img` `Uzers` 
---
## таблица `PerevalAdded` :
поле | обязательное поле | описание   | значения
---|:-----------------:|------------|---
**`status`** |                   | состояние записи | new, pending, accepted, rejected, </br> при добавлении записи присваивается 'new'
**`point`** |        да         | координаты | связь OneToOne с таблицей `Coords`
**`images`** |        да         | фото и описание перевала | связь OneToOne с таблицей `Img`, </br>возможно добавление трёх фото с описанием,  </br> необходимо внести хотя бы одно фото с описанием
**`beautyTitle`** |        да         | тип объекта | перевал, седло, хребет и тд
**`title`** |        да         | название объекта |
**`other_titles`** |        да         | альтернативное название |
**`connect_other_titles`**  |        нет        | какие известные объекты в БД может соединять |
**`add_time`** |                   | время добавление записи | создаётся автоматически
**`user`** |        да         | пользователь | связь ForeignKey с таблицей Uzers
**`level_winter`** |        нет        | уровень сложности в зимний период | от 1a до 6b (отображается от 1А до 6Б)
**`level_summer`** |        нет        | уровень сложности в летний период | от 1a до 6b (отображается от 1А до 6Б)

## таблица `Coords`:
поле | обязательное поле |    описание | значения
---|:------------:|------------|---
 **`longitude`** | да |     долгота | тип float
 **`latitude`** | да |      широта | тип float                
 **`height`**  | да |      высота | тип integer               

## таблица `Uzers`:
поле | обязательное поле |    описание | значения
---|:------------:|----------|---
**`family`** |да | фамилия |
**`name`**|да | имя |
**`patronymic`**|да | отчество |
**`email`**|да | эл.почта | уникальное значение
**`cell`**|да | сотовый |

## таблица `Img`:
поле | обязательное поле |          описание          | значения
---|:-----------------:|:--------------------------:|---
**`about_1`** | да |  описание</br>фотографии   
**`pic_1`** | да | ссылка на </br>фотографию  |URL путь на фото
**`about_2`** | нет |  описание</br>фотографии   
**`pic_2`** | нет | ссылка на </br>фотографию  |URL путь на фото
**`about_3`** | нет |  описание</br>фотографии   
**`pic_3`** | нет | ссылка на </br>фотографию  |URL путь на фото

----
# API endpoints:
1. ### метод **`GET`**
    - *`/pereval/`* - вывод всех записей таблицы **PerevalAdded**
    - *`/pereval/submitData/<pk:int>`* - вывод записи с id = pk из таблицы **PerevalAdded**
    - *`/pereval/submitData/?user__email=<email>`* - вывод всех записей пользователя с полем почты = email из таблицы **PerevalAdded**
2. ### метод **`PATCH`**
    - *`/pereval/submitData/<pk:int>`* - редактирование записи с id = pk из таблицы **PerevalAdded**</br>
      данные передаются в JSONе, можно отправлять только редактируемые пары JSON-объекта</br>
      - при текущем значении поля **status** отличном от **new**, изменения не вносятся
      - данные о пользователе не редактируются
   3. ### метод **`POST`** 
      `/pereval/submitData/` - добавление новой записи в формате **JSON**:<br>   
      {  <br>
       "point": { <br>
       "longitude": "7.1525",<br>
       "latitude": "45.3842",<br>
       "height": 1200<br>
     },<br>
     "images": {<br>
       "about_1": "Седловина",<br>
       "pic_1": "https://pibig.info/uploads/posts/2022-11/1669749986_1-pibig-info-p-pkhiya-krasivo-1.jpg", <br>
       "about_2": "",<br>
       "pic_2": "",<br>
       "about_3": "",<br>
       "pic_3": ""<br>
     },<br>
     "title": "Пхия",<br>
     "beautyTitle": "перевал",<br>
     "other_titles": "",<br>
     "connect_other_titles": "",<br>
     "user": {<br>
       "family": "Пупкин",<br>
       "name": "Василий",<br>
       "patronymic": "Иванович",<br>
       "email": "user@email.tld",<br>
       "cell": 79031234567<br>
     },<br>
     "level_winter": "",<br>
     "level_summer": "1a"<br>
     }<br>
   
Также можно руководствоваться документацией  [**swagger**](https://stutzerg.pythonanywhere.com/swagger-ui)